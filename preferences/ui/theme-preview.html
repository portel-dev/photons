<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theme Preview</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.5;
      transition: background 0.3s, color 0.3s;
    }

    /* Light theme */
    body.light {
      --bg-primary: #ffffff;
      --bg-secondary: #f8f9fa;
      --bg-code: #f1f3f4;
      --text-primary: #1a1a1a;
      --text-secondary: #5f6368;
      --accent: #1a73e8;
      --border: #e8eaed;
    }

    /* Dark theme */
    body.dark {
      --bg-primary: #1e1e1e;
      --bg-secondary: #252526;
      --bg-code: #2d2d2d;
      --text-primary: #d4d4d4;
      --text-secondary: #808080;
      --accent: #569cd6;
      --border: #404040;
    }

    /* System theme - uses media query */
    body.system {
      --bg-primary: #ffffff;
      --bg-secondary: #f8f9fa;
      --bg-code: #f1f3f4;
      --text-primary: #1a1a1a;
      --text-secondary: #5f6368;
      --accent: #1a73e8;
      --border: #e8eaed;
    }

    @media (prefers-color-scheme: dark) {
      body.system {
        --bg-primary: #1e1e1e;
        --bg-secondary: #252526;
        --bg-code: #2d2d2d;
        --text-primary: #d4d4d4;
        --text-secondary: #808080;
        --accent: #569cd6;
        --border: #404040;
      }
    }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      padding: 16px;
    }

    .preview-container {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
      max-width: 400px;
    }

    .preview-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .preview-title {
      font-size: 16px;
      font-weight: 600;
    }

    .theme-badge {
      background: var(--accent);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      text-transform: uppercase;
    }

    .preview-text {
      color: var(--text-secondary);
      font-size: 14px;
      margin-bottom: 12px;
    }

    .preview-code {
      background: var(--bg-code);
      border-radius: 4px;
      padding: 12px;
      font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
      font-size: 13px;
      overflow-x: auto;
    }

    .preview-code .keyword {
      color: var(--accent);
    }

    .preview-code .string {
      color: #ce9178;
    }

    .preview-code .comment {
      color: var(--text-secondary);
      font-style: italic;
    }
  </style>
</head>
<body class="system">
  <div class="preview-container">
    <div class="preview-header">
      <span class="preview-title" id="title">Sample Content</span>
      <span class="theme-badge" id="badge">System</span>
    </div>
    <p class="preview-text" id="text">This is how your content will look with this theme.</p>
    <pre class="preview-code" id="code"><span class="keyword">const</span> greeting = <span class="string">"Hello, World!"</span>;</pre>
  </div>

  <script>
    // Data from Photon is available as window.__photon_data__
    const data = window.__photon_data__ || {
      theme: 'system',
      sample: {
        title: 'Sample Content',
        text: 'This is how your content will look with this theme.',
        code: 'const greeting = "Hello, World!";'
      }
    };

    // Apply theme class
    document.body.className = data.theme;

    // Update badge
    const badge = document.getElementById('badge');
    badge.textContent = data.theme.charAt(0).toUpperCase() + data.theme.slice(1);

    // Update content if provided
    if (data.sample) {
      document.getElementById('title').textContent = data.sample.title;
      document.getElementById('text').textContent = data.sample.text;

      // Simple syntax highlighting
      const codeEl = document.getElementById('code');
      let code = data.sample.code;
      code = code.replace(/\b(const|let|var|function|return|if|else|for|while)\b/g, '<span class="keyword">$1</span>');
      code = code.replace(/"([^"]*)"/g, '<span class="string">"$1"</span>');
      code = code.replace(/'([^']*)'/g, '<span class="string">\'$1\'</span>');
      code = code.replace(/(\/\/.*)/g, '<span class="comment">$1</span>');
      codeEl.innerHTML = code;
    }
  </script>
</body>
</html>
